<!DOCTYPE html>
<html>
<head>
    <title>Auth Page</title>
</head>
<body>

{% if show == 'register' %}
    <h2>Register</h2>
    <form method="POST" action="{% url 'register' %}">
        {% csrf_token %}
        <input type="text" name="username" placeholder="Username" required>
        <input type="password" name="password" placeholder="Password" required>
        <button type="submit">Register</button>
    </form>
    <p>Already have an account? <a href="{% url 'auth' %}?show=login">Login</a></p>

{% elif show == 'otp' %}
    <h2>Enter OTP</h2>
    <form method="POST" action="{% url 'otp' %}">
        {% csrf_token %}
        <input type="hidden" name="username" value="{{ username }}">
        <input type="text" name="otp" placeholder="Enter OTP" required>
        <button type="submit">Verify OTP</button>
    </form>
    {% if otp %}<p>Dev OTP: <strong>{{ otp }}</strong></p>{% endif %}
    <p><a href="{% url 'auth' %}?show=login">Back to Login</a></p>

{% else %}
    <h2>Login</h2>
    <form method="POST" action="{% url 'login' %}">
        {% csrf_token %}
        <input type="text" name="username" placeholder="Username" required>
        <input type="password" name="password" placeholder="Password" required>
        <button type="submit">Login</button>
    </form>
    <p>New user? <a href="{% url 'auth' %}?show=register">Register</a></p>
{% endif %}

{% if error %}
    <p style="color:red">{{ error }}</p>
{% endif %}

</body>
</html>